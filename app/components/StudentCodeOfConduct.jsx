// src/components/StudentCodeOfConduct.jsx
import React from 'react'

/**
 * Raw Student Code of Conduct text.
 * Keep this in a CMS later—right now it's a single template literal.
 */
const rawContentWithoutParanthesis = `
Student rules
 
All students must keep to the same rules, regardless of their college site, age or course. As well as these rules, there may be extra specific rules relating to your college, age and course. Any specific rules will be made clear to you, either in the handbook that you will receive closer to your course, or when you arrive. 
 
All our rules are there to protect you and those around you, and to make sure that all our students can make the most of their time with us. 
 
 
Behaviour guidelines
 
We expect our students to make the most of their stay with us by following the guidelines below. 
 
•  	Safety
Don't do anything that could put you or others in danger. Make sure a member of staff always knows where you are. 
 
•  	Respect 
Treat other people and the college with respect. Always be polite, considerate and honest. 
 
•         Organisation 
Be prepared for lessons and activities, and be on time. 
 
•         Instructions 
Follow all instructions our staff and members of the college give you. 
 
•  	Effort 
Make a good effort in everything you do. This includes lessons, activities and group work. 
  
Rules and discipline 
 
This section sets out the rules that everyone must follow during their time with us. We have these rules to make sure that you and other students remain happy and safe. You should read them with part B 'Terms and Conditions'. 
 
If you do not keep to all rules that apply (these rules and any extra specific rules), we will take disciplinary action against you.
 
We can change these rules when we think it is necessary. The rules are not designed to cover every eventuality. If there is any unacceptable behaviour that is not covered by these rules, we can still take disciplinary action in line with our disciplinary policy. 
 
 
Rules 
 
1 	Behaviour 
 
a              Always be polite and respectful to:
•       each other;
•       our staff and student helpers; and 
•       the staff and other residents of your college and accommodation. 
 
b              You must respect the authority of all our staff. They are there to make sure your course is enjoyable, fulfilling and safe for all students. 
 
c               We will not tolerate any kind of bullying or harassment. It is unacceptable to treat any other person unfairly because of their race, religion, age, gender, disability, sexuality or appearance. 
 
d              Be punctual. You must be on time for registration, your seminars, tutorials, activities, and handing in your work. 
 
e              Use good table manners. Also, mobile phones should not be used at mealtimes. 
 
f               You must not be involved in any behaviour or activity that damages, or could damage, our reputation. 
 
 
2     Attendance, registration and curfew 
 
a              You must attend registration according to the requirements for your age group. If a curfew applies to you (which depends on your age), you should be in your room by the set time. Excess noise
(such as loud music and shouting) is not allowed in any accommodation. 
 
b              You must go to all of your classes during the course. You must arrive in good time, register, and take any necessary equipment and work with you. 
 
c              We expect you to have the meals provided for you, as set out in your course programme. We also expect you to attend social and cultural activities during the day and evening. Some of these activities are compulsory for particular age groups. 
 
d              Exploring the city is part of your overall experience, but you must keep to any rules that apply to your age group. 
 
e              On certain days, there are day trips to visit sights and attractions away from the city your course is held in. You must arrive in good time for registration and departure, and bring along anything you may need for a full day out. 
 
f               If you are ill and feel that you cannot attend a class, meal or activity, tell a member of staff as soon as possible. If you miss too many classes, you may not get a graduation certificate. 
 
 
3     Accommodation  
 
a              It is a privilege to use the accommodation and facilities of important and historical universities. You must be polite and respectful to the staff and students of the colleges. Most colleges also have their own rules which you must keep to. 
 
b              If there are separate areas for different genders, you must not enter the areas that are only for the opposite gender. There are plenty of mixed common rooms and spaces equipped with activities and games for everyone. 
 
c              You must look after your room. The college cleaners (known as scouts) will regularly clean rooms and empty bins. Help them by keeping your room clean and tidy. You will be charged for any damage to college buildings, furnishings or property. 
 
d              You may be given a key to your room and an electronic 'access card' for college buildings. You are responsible for looking after these. If you lose either of them, you will have to pay a charge (normally about £30) for a replacement. Lock your room every time you leave it, even if you are only leaving it for a few minutes. You are responsible for your personal belongings. Do not leave them unattended around the college buildings or grounds. We are not responsible for lost personal belongings. 
 
e              You must not enter restricted areas of your college, or any accommodation or floor other than the one where your room is. 
 
f               You are never allowed in the rooms of our staff or college staff. 
 
 
4     Forbidden items and activities  
 
a              Smoking, vaping and buying, trying to buy or drinking alcohol are against our rules, and they are also against UK law for anyone under 18. Smoking is not allowed on college sites, and will not be tolerated at the entrances to college sites. 
 
b              You must not buy, possess or use illegal drugs or so-called 'legal highs'. 
 
c              You cannot have weapons or any other kind of dangerous items while you are a student with us.
 
d              Our staff may enter your room if they suspect there are any forbidden items there. Staff will confiscate any items they consider to break these rules. We will decide whether or not to return the items at the end of the course. Any search will be carried out in line with our room search policy, which is in line with Section 550ZA of the Education Act 1996. 
 
e              You must keep to the IT regulations of the college, as set out in the  internet-access document you will receive when you arrive. 
 
 
5     Safety 
 
a              You must keep to all fire regulations explained during the welcome meeting at the start of the course. At the meeting you will be told where the fire assembly point for your accommodation is. 
 
You must not have any candles, matches, incense or lighters in your accommodation. 
 
You must not touch safety equipment such as fire extinguishers or smoke detectors. 
 
b              You must not ride a bike or take public transport without permission. City roads can be extremely dangerous for cyclists, and everything is within walking distance.
 
c              Do not go off with strangers or befriend anyone outside Oxford Summer Courses. 
 
 
6     Dismissal
 
a              These rules are designed to allow all students to take part in Oxford Summer Courses in a fun, fulfilling, and safe way. It is vital that you follow them. If you do not, it may put your and other students' safety at risk, or spoil your or their enjoyment of the courses. 
 
b              If you break these rules we may take action, including:
•       not allowing you to take part in activities; 
•       giving you a formal written warning; or
•       the course director phoning your parents or guardians to discuss your behaviour. 
 
c              If you break the rules repeatedly, behave badly or disrupt the course, we can dismiss you from the course. If this happens, you will be sent home immediately, at your (or your parents' or guardians') expense. We will not refund any fees paid, and you will not receive a graduation certificate. 
 
If you break any of rules 4a, 4b or 4c, we may instantly dismiss you from the course. 
 
 
Discipline 
 
Most of our students do not cause trouble and never have to go through our disciplinary procedure. However, in rare cases we need to take action to stop poor behaviour. 
 
If we take disciplinary action, the sanctions (punishments) our staff can choose from, at any stage and for any matter, are listed in clause 7 below. 
 
Being honest and genuinely sorry may lead to a less serious sanction but being dishonest may make matters worse. When deciding the most appropriate sanction, we will consider your record of behaviour and the effort you are putting into your course. 
 
The levels of sanctions are:
 
•       warning;
•       minor sanction;
•       major sanction;  • final warning; and 
•       dismissal. 
 
 
7     Sanctions 
 
          	a   	Warning 
 
Any member of staff can give you a warning if they are unhappy with your behaviour. The staff member will make a record of this, and may speak to your assistant course director. However, no further action will be taken if you don't break the rules again. 
 
Warnings will be given for any behaviour that is not in line with the five behaviour guidelines given on page one of these rules – safety, respect, organisation, instructions and effort. Being late, behaviour that is likely to annoy others and being disorganised are examples of actions that will result in a warning. 
 
          	b   	Minor sanction 
 
A minor sanction may be you losing any special right or advantage you have or missing an activity. Your assistant course director will decide what the sanction will be. 
 
You may receive a minor sanction if: 
 
•         you have already been given a warning but you continue to break the rules; or 
•         you have broken the rules in a serious way.
 
          	c   	Major sanction 
 
These are similar to minor sanctions but last for a longer period or have a greater effect, and we will contact your parents or guardians. Bullying, rudeness and leaving the site without permission are examples of things that will instantly lead to a major sanction. 
 
You may receive a major sanction if: 
 
•         you continue to break the rules after minor sanctions; or 
•         you break the rules in a serious way which is likely to have affected others. 
 
          	d   	Final warning 
 
A final warning involves a meeting with the course director and, in certain cases, a Head Office manager. You will have to sign an agreement to acknowledge that you have been given a final warning. Your parents or guardians will be told about the final warning. You may also receive other sanctions as well. 
 
If you have any banned items, have been involved in serious bullying, or been reprimanded for rudeness, you will automatically get a final warning (and possibly an instant dismissal from your course). 
 
You are likely to get a final warning if: 
 
•         you continue to break the rules after receiving a major sanction; or 
•         you break these rules in a serious way which makes us question whether you are suitable for the course. 
 
          	e   	Dismissal 
 
This is the sanction for the most serious disciplinary issues, or persistent unacceptable behaviour. If you are dismissed from the course, you will be sent home, at your (or your parents' or guardians') expense, as early as reasonably possible. If you cannot be put on a flight back home that day, you may be banned from lessons and activities until you leave, and you may have to move to a room off campus. You are likely to be dismissed if we believe that you remaining on the course would pose a risk to your own or other students' welfare, or if you break UK law. 
 
 
8     Complaints
 
a              We will deal with any complaints in line with our complaints policy. 
 
Parents and guardians can make official complaints to any member of staff or to the course director. If the complaint is about the course director, it should be made to the company directors. 
 
b              Any member of staff who receives a complaint will ask you to confirm whether or not the complaint is an official one to be handled formally. They will keep a record of the conversation and ask you to put your complaint in writing to make sure it is dealt with properly. They will check their record of the conversation with you to make sure it is accurate. If your complaint is about a specific person, we will not tell that person about your complaint. The course director (or someone they have delegated the duty to) will then decide what action, if any, needs to be taken. 
 
c              Any investigation will be carried out as quickly as reasonably possible and will be recorded. Following an investigation, the person who carried it out will tell you the outcome and any action that will be taken. A meeting will be arranged with you after the review has been completed.
 
d              If you are unhappy with how your complaint was handled, or with the outcome of it, you can ask for the investigation or decision to be reviewed by the company directors. 
 
9     Bullying and harassment
 
a              We take bullying very seriously and will treat every reported incident with care. 
 
b              Bullying is deliberately hurtful behaviour towards someone, either as a single incident or over time. It can be physical, verbal, indirect or a combination of any of these. 
 
Examples of bullying include the following. 
 
•             Physical abuse (any sort of unwanted physical contact) 
 
•             Verbal abuse (any comment about someone that upsets them) 
 
•             Using language that attacks a group of people (for example, racist, sexist or homophobic language) 
 
•             Excluding a person, ignoring them or spreading rumours about them 
 
•             Being threatening (acting in a way that makes another person
feel afraid) 
 
•             Stealing (ideas as well as possessions) 
 
In general, any action that reduces another student's self-esteem is bullying. To combat bullying, we try to prevent cliques – groups that do not readily allow others to join – from forming, and insist that English is used in and out of lessons. 
 
c              If you are being bullied, or think that somebody else is being bullied, you should tell a member of the pastoral staff immediately. The matter will be passed to the course director, who will take it very seriously and deal with it as a priority. 
 
d              You can report bullying anonymously by putting a note under the door of any member of residential staff. 
 
e              Where appropriate, along with the standard discipline measures, we will offer a victim of bullying a chance to meet the bully to sort the matter out. 
 
 
10  Plagiarism
 
a              Plagiarism is reproducing work that is not your own and trying to pass it off as yours. This can be copying directly from someone else, or simply rewriting what they produced without making a reference to them. We have a strict no-plagiarism policy.
 
b              Quoting another author is not plagiarism if you specify that you are quoting the other author's work. And using another writer's ideas
or arguments as part of your own argument is not plagiarism, as long as you acknowledge the other writer's idea or argument. 
 
c              Plagiarism is a serious academic offence, which we will take disciplinary action for. This may mean that you have to do the work again to receive your graduation certificate. 
 
d              We will hold workshops on avoiding plagiarism, and staff will be able to give advice to any student who is concerned. With care, it is not difficult to avoid plagiarism, and it is much better to get advice to be sure. 
 
 
11  Visitor policy 
 
          	a     	General 
The security of everyone at Oxford Summer Courses, and the security of students is our highest priority. We take all reasonable steps to prevent unauthorised entry to our premises, while allowing access for parents, tutors and staff. 
 
          	b     	Access 
Different sites have different levels of access, and some college sites are shared with other summer courses. However, no person can enter student accommodation they do not have their room in. People who are internal or temporarily associated with the college may have access to student accommodation. This includes parents and guardians on pick-up and drop-off days, college cleaning staff and, where necessary, college staff. Students should be observant and use common sense when dealing with a situation where there is a visitor on the college site. 
 
          	c     	Accommodation 
To increase the security of the accommodation blocks, entrance doors are fitted with either fob scanners or number-code locks. 
 
          	d     	Personal belongings 
Valuables which are left unattended could easily be stolen. You are responsible for looking after your personal belongings and keeping them safe. 
 
          	e     	Visits 
Family members and friends are welcome to visit you while you are
on the course. They can also take you out (for example, for dinner in the evening), but this must be arranged beforehand. All visitors, including family members, must book their visit through the course director. They do this by phoning or emailing the course director to arrange a time to visit, giving at least 48 hours' notice. 
 
Visitors should not turn up to the college without arranging this with the course director, as colleges have a strict visitor policy for security reasons. Visitors will only be allowed on a college site if they have booked the visit beforehand. 
 
Visitors will normally be escorted by a member of staff when they are on a college site.
`

function addParens(src) {
    return src.replace(
      /^(\s*)([a-z])(\s{2,})/gm,       // indent ‑> letter ‑> >=2 spaces
      (_, indent, letter, spaces) => `${indent}(${letter})${spaces}`
    );
  }
  
  const rawContent = addParens(rawContentWithoutParanthesis);

/** Utility to create URL‑safe IDs */
const slugify = (text) =>
  text
    .toLowerCase()
    .replace(/[^a-z0-9]+/g, '-')
    .replace(/(^-|-$)/g, '')

const StudentCodeOfConduct = () => {
  // Extract main sections from content
  const mainSections = [
    { title: "Student rules", id: "student-rules" },
    { title: "Behaviour guidelines", id: "behaviour-guidelines" },
    { title: "Rules and discipline", id: "rules-discipline" },
    { title: "Rules", id: "rules" },
    // { title: "Discipline", id: "discipline" }
  ]

  // Extract rule sections (numbered items)
  const ruleSections = []
  const lines = rawContent.trim().split('\n')
  
  let currentRule = null
  let ruleContent = []
  
  lines.forEach(line => {
    // Match numbered rule headings like "1 Behaviour" or "2 Attendance, registration and curfew"
    const ruleMatch = line.match(/^(\d+)\s+([^\n]+)/)
    
    if (ruleMatch) {
      // Save previous rule if exists
      if (currentRule) {
        ruleSections.push({
          number: currentRule.number,
          title: currentRule.title,
          id: slugify(`rule-${currentRule.number}-${currentRule.title}`),
          content: ruleContent.join('\n')
        })
        ruleContent = []
      }
      
      // Start new rule
      currentRule = {
        number: ruleMatch[1],
        title: ruleMatch[2].trim()
      }
    } 
    else if (currentRule) {
      ruleContent.push(line)
    }
  })
  
  // Add the last rule if exists
  if (currentRule && ruleContent.length) {
    ruleSections.push({
      number: currentRule.number,
      title: currentRule.title,
      id: slugify(`rule-${currentRule.number}-${currentRule.title}`),
      content: ruleContent.join('\n')
    })
  }

  // Parse the content to get sections for behavior guidelines
  const guidelineMatch = rawContent.match(/Behaviour guidelines\s+([\s\S]*?)(?=Rules and discipline)/);
  const guidelines = guidelineMatch ? guidelineMatch[1].trim().split('•').filter(Boolean).map(item => item.trim()) : [];

  return (
    <div className="max-w-5xl mx-auto px-6 py-10 text-grey">
      {/* Page title */}
      <h1 className="text-4xl font-bold text-orange text-center mb-8">
        Student Code of Conduct
      </h1>

      {/* Table of contents */}
      <nav className="mb-10 bg-gray-50 p-6 rounded-lg shadow-sm">
        <h2 className="text-xl font-semibold text-orange mb-4">Contents</h2>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-2">
          {mainSections.map(section => (
            <a 
              key={section.id} 
              href={`#${section.id}`} 
              className="text-grey hover:text-orange hover:underline"
            >
              {section.title}
            </a>
          ))}
          {ruleSections.map(rule => (
            <a 
              key={rule.id} 
              href={`#${rule.id}`} 
              className="text-grey hover:text-orange hover:underline"
            >
              {rule.number}. {rule.title}
            </a>
          ))}
        </div>
      </nav>

      {/* Introduction */}
      <section id="student-rules" className="mb-12">
        <h2 className="text-2xl font-semibold text-orange mb-4">Student rules</h2>
        <div className="space-y-4 text-grey text-base leading-relaxed text-justify">
          <p>All students must keep to the same rules, regardless of their college site, age or course. As well as these rules, there may be extra specific rules relating to your college, age and course. Any specific rules will be made clear to you, either in the handbook that you will receive closer to your course, or when you arrive.</p>
          <p>All our rules are there to protect you and those around you, and to make sure that all our students can make the most of their time with us.</p>
        </div>
      </section>

      {/* Behavior Guidelines */}
      <section id="behaviour-guidelines" className="mb-12">
        <h2 className="text-2xl font-semibold text-orange mb-4">Behaviour guidelines</h2>
        <p className="text-grey mb-4">We expect our students to make the most of their stay with us by following the guidelines below.</p>
        
        <div className="grid md:grid-cols-2 gap-4">
          <div className="bg-orange bg-opacity-5 p-4 rounded-lg shadow-sm">
            <h3 className="font-semibold text-orange">Safety</h3>
            <p className="text-grey">Don't do anything that could put you or others in danger. Make sure a member of staff always knows where you are.</p>
          </div>
          
          <div className="bg-orange bg-opacity-5 p-4 rounded-lg shadow-sm">
            <h3 className="font-semibold text-orange">Respect</h3>
            <p className="text-grey">Treat other people and the college with respect. Always be polite, considerate and honest.</p>
          </div>
          
          <div className="bg-orange bg-opacity-5 p-4 rounded-lg shadow-sm">
            <h3 className="font-semibold text-orange">Organisation</h3>
            <p className="text-grey">Be prepared for lessons and activities, and be on time.</p>
          </div>
          
          <div className="bg-orange bg-opacity-5 p-4 rounded-lg shadow-sm">
            <h3 className="font-semibold text-orange">Instructions</h3>
            <p className="text-grey">Follow all instructions our staff and members of the college give you.</p>
          </div>
          
          <div className="bg-orange bg-opacity-5 p-4 rounded-lg shadow-sm">
            <h3 className="font-semibold text-orange">Effort</h3>
            <p className="text-grey">Make a good effort in everything you do. This includes lessons, activities and group work.</p>
          </div>
        </div>
      </section>

      {/* Rules and discipline */}
      <section id="rules-discipline" className="mb-12">
        <h2 className="text-2xl font-semibold text-orange mb-4">Rules and discipline</h2>
        <div className="space-y-4 text-grey text-base leading-relaxed text-justify">
          <p>This section sets out the rules that everyone must follow during their time with us. We have these rules to make sure that you and other students remain happy and safe. You should read them with part B 'Terms and Conditions'.</p>
          <p>If you do not keep to all rules that apply (these rules and any extra specific rules), we will take disciplinary action against you.</p>
          <p>We can change these rules when we think it is necessary. The rules are not designed to cover every eventuality. If there is any unacceptable behaviour that is not covered by these rules, we can still take disciplinary action in line with our disciplinary policy.</p>
        </div>
      </section>

      {/* Rules */}
      <section id="rules" className="mb-12">
        <h2 className="text-2xl font-semibold text-orange mb-4">Rules</h2>
        
        {ruleSections.map((rule, index) => (
          <div id={rule.id} key={rule.id} className="mb-8 border-l-4 border-orange pl-4">
            <h3 className="text-xl font-semibold text-orange mb-3">
              {rule.number}. {rule.title}
            </h3>
            <div className="whitespace-pre-line text-grey leading-relaxed text-justify">
              {rule.content}
            </div>
          </div>
        ))}
      </section>

      {/* Discipline */}

    </div>
  )
}

export default StudentCodeOfConduct